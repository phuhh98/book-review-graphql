#  Template NodeJS build

#  This template allows you to validate your NodeJS code.
#  The workflow allows running tests and code linting on the default branch.

image: node:16

definitions:
  steps:
    - step: &yarn-install
        name: Yarn Install
        caches:
          - node
        script:
          - npm install -g yarn --force
    - step: &Dep-install
        name: Install dependencies
        caches:
          - node
        script:
          - yarn
    - step: &Run-tests
        name: Run tests
        caches:
          - node
        script:
          - yarn run test
    - step: &Run-lint
        name: Runt code lint
        caches:
          - node
        script:
          - yarn run lint

pipelines:
  default:
    - step: *yarn-install
    - step: *Dep-install
    - parallel:
        steps:
          - step: *Run-tests
          - step: *Run-lint
